<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zoê</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  background:#e5e7eb;
  display:flex;
  justify-content:center;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
}
.phone{
  width:100%;
  max-width:420px;
  min-height:100vh;
  background:#f8fafc;
}
header{
  background:#22c55e;
  color:#fff;
  padding:16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-weight:600;
}
header button{
  background:#fff;
  color:#22c55e;
  border:none;
  padding:6px 14px;
  border-radius:18px;
}
main{padding:16px}
.card{
  background:#fff;
  border-radius:16px;
  padding:16px;
  margin-bottom:16px;
  box-shadow:0 6px 18px rgba(0,0,0,.08);
}
.card img{
  width:100%;
  border-radius:12px;
}
.btn{
  width:100%;
  padding:12px;
  border:none;
  border-radius:12px;
  margin-top:10px;
  font-weight:600;
}
.btn.green{background:#22c55e;color:#fff}
.btn.blue{background:#2563eb;color:#fff}
.btn.gray{background:#e5e7eb;color:#111}
.progress{
  height:8px;
  background:#e5e7eb;
  border-radius:8px;
  overflow:hidden;
}
.progress-fill{
  height:100%;
  background:#22c55e;
}
.value-buttons{
  display:flex;
  gap:8px;
  margin:10px 0;
}
.value-buttons button{
  flex:1;
  padding:10px;
  border-radius:10px;
  border:2px solid #22c55e;
  background:#fff;
  color:#22c55e;
}
.value-buttons button.active{
  background:#22c55e;
  color:#fff;
}
input{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:1px solid #ddd;
  margin-top:8px;
}
</style>
</head>

<body>
<div class="phone">

<header>
  <span>Zoê</span>
</header>

<main id="screen"></main>
<div id="paymentScreen" style="display:none;padding:16px;"></div>

<script>
// ================= LOGIN SIMPLES =================
const usuario = JSON.parse(localStorage.getItem("usuarioLogado"));
if(!usuario){
  document.getElementById("screen").innerHTML = `
    <div class="card" style="text-align:center">
      <h3>Acesso restrito</h3>
      <p>Entre pelo login.</p>
      <button class="btn green" onclick="location.href='index.html'">
        Ir para login
      </button>
    </div>
  `;
  throw ""; // para execução aqui SEM loop
}

// ================= DADOS =================
const families = [
  { name:"Família Silva", image:"assets/familia1.jpeg", goal:1800, raised:720 },
  { name:"Família Pereira", image:"assets/familia2.jpeg", goal:900, raised:300 },
  { name:"Família Rocha", image:"assets/familia3.jpeg", goal:1500, raised:0 },
  { name:"Família do Amor", image:"assets/familia4.jpeg", goal:2000, raised:0 },
  { name:"Família Santos", image:"assets/familia5.jpeg", goal:1200, raised:0 },
  { name:"Família Ferreira", image:"assets/familia6.jpeg", goal:1800, raised:0 },
  { name:"Família Nunes", image:"assets/familia7.jpeg", goal:900, raised:0 },
  { name:"Família Costa", image:"assets/familia8.jpeg", goal:1600, raised:0 },
  { name:"Família Lima", image:"assets/familia9.jpeg", goal:1400, raised:0 }
];

let familiaAtual="";
let valorSelecionado=0;

// ================= HOME =================
function renderHome(){
  const s=document.getElementById("screen");
  document.getElementById("paymentScreen").style.display="none";
  s.innerHTML=`
    <div class="card">
      <h3>Bem-vindo(a)</h3>
      <p>Escolha uma família para apadrinhar.</p>
    </div>
  `;
  families.forEach(f=>{
    const p=Math.min((f.raised/f.goal)*100,100);
    s.innerHTML+=`
      <div class="card">
        <img src="${f.image}">
        <strong>${f.name}</strong>
        <p>R$ ${f.raised} / R$ ${f.goal}</p>
        <div class="progress">
          <div class="progress-fill" style="width:${p}%"></div>
        </div>
        <button class="btn green" onclick="abrirPagamento('${f.name}')">
          Apadrinhar
        </button>
      </div>
    `;
  });
}

// ================= PAGAMENTO =================
function abrirPagamento(nome){
  familiaAtual=nome;
  document.getElementById("screen").innerHTML="";
  const p=document.getElementById("paymentScreen");
  p.style.display="block";
  p.innerHTML=`
    <div class="card">
      <h3>${nome}</h3>
      <button class="btn green" onclick="abrirPix()">Pix</button>
      <button class="btn blue" onclick="abrirCartao()">Cartão</button>
      <button class="btn gray" onclick="renderHome()">Voltar</button>
    </div>
  `;
}

function abrirPix(){
  valorSelecionado=0;
  document.getElementById("paymentScreen").innerHTML=`
    <div class="card">
      <h3>Pix</h3>
      <div class="value-buttons">
        <button onclick="setValor(10,this)">R$10</button>
        <button onclick="setValor(50,this)">R$50</button>
        <button onclick="setValor(100,this)">R$100</button>
      </div>
      <input id="valorInput" type="number" placeholder="Outro valor"
        oninput="setValor(this.value)">
      <button class="btn green" onclick="gerarPix()">Continuar</button>
    </div>
  `;
}

function setValor(v,b=null){
  valorSelecionado=Number(v)||0;
  const i=document.getElementById("valorInput");
  if(i) i.value=valorSelecionado||"";
  document.querySelectorAll(".value-buttons button")
    .forEach(x=>x.classList.remove("active"));
  if(b) b.classList.add("active");
}

function gerarPix(){
  if(valorSelecionado<=0) return alert("Informe valor");
  document.getElementById("paymentScreen").innerHTML=`
    <div class="card" style="text-align:center">
      <h3>PIX</h3>
      <p>R$ ${valorSelecionado.toFixed(2)}</p>
      <img src="assets/qrcode-pix.jpg" style="width:220px">
      <button class="btn green" onclick="renderHome()">Já paguei</button>
    </div>
  `;
}

function abrirCartao(){
  document.getElementById("paymentScreen").innerHTML=`
    <div class="card">
      <h3>Cartão</h3>
      <input placeholder="Nome no cartão">
      <input placeholder="Número">
      <input placeholder="Validade">
      <input placeholder="CVV">
      <button class="btn blue" onclick="renderHome()">Pagar</button>
    </div>
  `;
}

// START
renderHome();
</script>

</div>
</body>
</html>
